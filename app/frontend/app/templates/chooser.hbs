<div id="chooser__pane" class="application-pane">
  <div id="chooser__asset-selector" class="chooser__asset-selector">
    <h3>Selected Assets:</h3>
    {{#paper-button raised=true primary=true}}Save and Close{{/paper-button}}

    {{#drag-sort-list 
      tagName="ul" 
      id="chooser__asset-bucket"
      class="asset-bucket" 
      childClass="asset-bucket__item"
      group="assets"
      items=model 
      dragEndAction=(action 'sort')
      as |asset|}}

        {{#paper-card as |card|}}
          <div {{action 'editAsset' asset}}>
            {{#card.actions class="asset-bucket__actions"}}
              {{#paper-button warn=true iconButton=true}}
                {{paper-icon "close"}}
              {{/paper-button}}
            {{/card.actions}}
            {{#card.title as |title|}}
              {{#title.media size="md"}}
                <div class="asset-bucket__item-thumb card-media" style={{image-background-style asset.urls.lsquare asset.image_gravity}}>
                </div>
              {{/title.media}}
              {{#title.text class="asset-bucket__text" as |text|}}
                <h3>{{or asset.title 'Untitled Asset'}}</h3>
                {{#text.subhead}}{{asset.caption}}{{/text.subhead}}
              {{/title.text}}
            {{/card.title}}
          </div>
        {{/paper-card}}
  
    {{/drag-sort-list}}

  </div>



  <div id="chooser__browser">
    {{paper-input
        id="chooser__search-box"
        class="search-box" 
        iconRight="search" 
        value=search.query
        onChange=(action (mut search.query))
    }}
    {{asset-list 
      id="chooser__asset-list" 
      class="chooser__asset-list" 
      draggingEnabled=true
      dragEndAction=(action 'dragEnd')
      assets=search.results
      message=message
      onClick=(action "showAsset")
    }}
  </div>

</div>

{{#if showEditorDialog}}
  {{#paper-dialog id="chooser__editor-dialog" class="editor-dialog flex-80" onClose=(action "closeEditorDialog" "cancel") clickOutsideToClose=true}}
    {{#paper-dialog-content}}
      <div class="layout-row">
        <figure class="editor-dialog__figure">
          <img class="editor-dialog__image" src={{selectedAsset.urls.small}}>
          <figcaption>What a wonderful world</figcaption>
        </figure>
        <div class="editor-dialog__form">
          {{paper-button raised=true label="View in Admin"}}
          <h2>Asset Metadata (Global)</h2>
          {{paper-input class="editor-dialog__input flex-100" label="Title" value=selectedAsset.title onChange=(action (mut selectedAsset.title))}}
          {{paper-input class="editor-dialog__input flex-100" label="Credit" value=selectedAsset.credit onChange=(action (mut selectedAsset.credit))}}
          {{paper-input 
            class="editor-dialog__input"
            textarea=true 
            block=true 
            label="Notes" 
            maxlength=150 
            passThru=(hash rows=5 maxRows=5) 
            value=selectedAsset.notes 
            onChange=(action (mut selectedAsset.notes))
          }}
        </div>
      </div>
      <div class="layout-row">
        <div class="editor-dialog__form">
          <h2 class="editor-dialog__subsequent-heading">Story Caption:</h2>
          {{paper-input 
            textarea=true 
            block=true 
            label="Caption" 
            maxlength=150 
            passThru=(hash rows=5 maxRows=5) 
            value=selectedAsset.caption
            onChange=(action (mut selectedAsset.caption))
          }}
        </div>
      </div>
    {{/paper-dialog-content}}
    {{#paper-dialog-actions class="layout-row"}}
      {{#paper-button onClick=(action "closeEditorDialog" "saveCaption")}}Save Caption{{/paper-button}}
      <span class="flex"></span>
    {{/paper-dialog-actions}}
  {{/paper-dialog}}
{{/if}}


{{#if showAssetDialog}}
  {{#paper-dialog onClose=(action "closeAssetDialog" "cancel")}}
    {{#paper-dialog-content}}
      <h2 class="md-title">{{or selectedAsset.title 'Untitled Asset'}}</h2>
      <p>{{selectedAsset.credit}}</p>
      <p>{{selectedAsset.size}}</p>
      <p>{{or selectedAsset.caption 'No caption.'}}</p>
    {{/paper-dialog-content}}

    {{#paper-dialog-actions class="layout-row"}}
      <span class="flex"></span>
      {{#paper-button primary=true onClick=(action "closeAssetDialog" "cancel")}}View in Admin{{/paper-button}}
      {{#paper-button primary=true onClick=(action "closeAssetDialog" "ok" dogName)}}Select Asset{{/paper-button}}
      {{#paper-button primary=true onClick=(action "closeAssetDialog" "ok" dogName)}}Close{{/paper-button}}
    {{/paper-dialog-actions}}

  {{/paper-dialog}}
{{/if}}